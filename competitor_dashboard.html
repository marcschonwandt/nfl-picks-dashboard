<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL Picks - Competitor Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            font-size: 36px;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .header p {
            color: #718096;
            font-size: 16px;
        }

        .nav-link {
            display: inline-block;
            margin-top: 15px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            transition: transform 0.2s;
        }

        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            background: #e2e8f0;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #4a5568;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: #667eea;
            color: white;
        }

        .tab-btn:hover {
            background: #5a67d8;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Leaderboard Styles */
        .leaderboard {
            display: grid;
            gap: 15px;
        }

        .player-card {
            background: linear-gradient(135deg, #f6f8fb 0%, #ffffff 100%);
            border-radius: 12px;
            padding: 20px;
            display: grid;
            grid-template-columns: 60px 1fr auto;
            align-items: center;
            gap: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .player-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.2);
        }

        .player-rank {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
        }

        .player-rank.rank-1 {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
        }

        .player-rank.rank-2 {
            background: linear-gradient(135deg, #c0c0c0 0%, #8e8e8e 100%);
        }

        .player-rank.rank-3 {
            background: linear-gradient(135deg, #cd7f32 0%, #8b5a00 100%);
        }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-size: 20px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .player-stats {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            font-size: 13px;
            color: #718096;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stat-value {
            font-weight: 600;
            color: #4a5568;
        }

        .player-points {
            text-align: right;
        }

        .points-value {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
        }

        .points-label {
            font-size: 12px;
            color: #718096;
            text-transform: uppercase;
        }

        /* Week Comparison Styles */
        .week-selector {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .week-selector select {
            padding: 10px 15px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .comparison-table {
            overflow-x: auto;
            overflow-y: auto;
            margin-top: 20px;
            max-height: 600px;
            position: relative;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            font-size: 12px;
        }

        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        th {
            padding: 10px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 11px;
            text-transform: uppercase;
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 10;
        }

        td {
            padding: 8px 12px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 12px;
        }

        tr:hover {
            background: #f7fafc;
        }

        .pick-cell {
            display: flex;
            align-items: center;
            gap: 6px;
            flex-wrap: wrap;
        }

        .team-badge {
            background: #667eea;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
        }

        .points-badge {
            background: #f6d365;
            color: #744210;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 9px;
            font-weight: 600;
        }

        .pick-won {
            background: #d4edda !important;
            border-left: 4px solid #28a745;
        }

        .pick-lost {
            background: #f8d7da !important;
            border-left: 4px solid #dc3545;
        }

        .pick-pending {
            background: #f3f4f6 !important;
            border-left: 4px solid #9ca3af;
        }

        .totals-row {
            background: #f7fafc !important;
            font-weight: 700;
            border-top: 3px solid #667eea;
        }

        .totals-row td {
            color: #2d3748;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .player-card {
                grid-template-columns: 50px 1fr;
                grid-template-rows: auto auto;
            }

            .player-rank {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .player-points {
                grid-column: 1 / -1;
                text-align: left;
                margin-top: 10px;
            }

            th, td {
                padding: 8px;
                font-size: 12px;
            }
        }

    <style>
    .league-standings-section {
        background: white;
        border-radius: 16px;
        padding: 30px;
        margin: 30px 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
    }

    .league-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        flex-wrap: wrap;
        gap: 15px;
    }

    .global-week-selector {
        display: flex;
        align-items: center;
        gap: 10px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 12px 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .global-week-selector label {
        font-size: 0.9em;
        font-weight: 600;
        color: white;
        margin: 0;
    }

    .global-week-selector select {
        padding: 8px 16px;
        border: 2px solid white;
        border-radius: 8px;
        font-size: 0.95em;
        font-weight: 600;
        color: #334155;
        background: white;
        cursor: pointer;
        transition: all 0.2s ease;
        min-width: 60px;
    }

    .global-week-selector select:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    .global-week-selector select:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
    }

    .league-stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
    }

    .league-stat-card {
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        border: 2px solid #e2e8f0;
    }

    .league-stat-label {
        font-size: 0.75em;
        color: #64748b;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 600;
        margin-bottom: 8px;
    }

    .league-stat-value {
        font-size: 2em;
        font-weight: bold;
        color: #1e293b;
    }

    .league-stat-value.highlight {
        color: #f59e0b;
        font-size: 2.5em;
    }

    .league-charts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .league-chart-container {
        background: #f8fafc;
        border-radius: 12px;
        padding: 20px;
        min-height: 400px;
    }

    .league-chart-title {
        font-size: 1.1em;
        font-weight: 600;
        color: #334155;
        margin-bottom: 15px;
    }

    .league-chart-container canvas {
        width: 100% !important;
        height: 350px !important;
    }

    .league-table-container {
        background: #f8fafc;
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
    }

    .table-wrapper {
        overflow-x: auto;
        margin-top: 15px;
    }

    .league-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.9em;
        background: white;
        border-radius: 8px;
        overflow: hidden;
    }

    .league-table thead {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .league-table th {
        padding: 12px 10px;
        text-align: center;
        font-weight: 600;
        font-size: 0.85em;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .league-table td {
        padding: 10px;
        text-align: center;
        border-bottom: 1px solid #e2e8f0;
    }

    .league-table tbody tr:hover {
        background: #f1f5f9;
    }

    .league-table .marc-row {
        background: rgba(245, 158, 11, 0.1);
        font-weight: 600;
    }

    .league-table .marc-row:hover {
        background: rgba(245, 158, 11, 0.15);
    }

    .league-table .rank-col {
        font-weight: bold;
        color: #667eea;
        width: 60px;
    }

    .league-table .player-col {
        text-align: left;
        padding-left: 15px;
        min-width: 180px;
        font-weight: 500;
    }

    .league-table .points-col {
        width: 60px;
        font-family: 'Courier New', monospace;
    }

    .league-table .round-winner {
        border: 3px solid #10b981;
        background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
        font-weight: bold;
        box-shadow: 0 0 8px rgba(16, 185, 129, 0.3);
    }

    .league-table .round-loser {
        border: 3px solid #ef4444;
        background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
        font-weight: bold;
        box-shadow: 0 0 8px rgba(239, 68, 68, 0.3);
    }

    .league-table .total-col {
        background: #f8fafc;
        font-weight: bold;
        color: #1e293b;
        width: 80px;
    }

    .league-table .round-col {
        width: 50px;
        font-size: 0.9em;
    }

    .league-chart-container-full {
        background: #f8fafc;
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
        min-height: 500px;
    }

    .league-chart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        flex-wrap: wrap;
        gap: 10px;
    }

    .week-selector {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .week-selector label {
        font-size: 0.9em;
        font-weight: 600;
        color: #334155;
    }

    .week-selector select {
        padding: 8px 12px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 0.9em;
        font-weight: 600;
        color: #334155;
        background: white;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .week-selector select:hover {
        border-color: #667eea;
    }

    .week-selector select:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .league-chart-container-full canvas {
        width: 100% !important;
        height: 450px !important;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
        .league-standings-section { padding: 20px; }
        .league-header { flex-direction: column; align-items: flex-start; }
        .league-stats-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .league-stat-card { padding: 15px; }
        .league-stat-value { font-size: 1.5em; }
        .league-stat-value.highlight { font-size: 2em; }
        .league-charts-grid { grid-template-columns: 1fr; }
        .league-chart-container canvas { height: 300px !important; }
        .league-table-container { overflow-x: auto; }
        .league-table { font-size: 0.85em; }
        .league-table th, .league-table td { padding: 10px 8px; }
    }

    @media (max-width: 480px) {
        .league-standings-section { padding: 15px; }
        .league-stats-grid { grid-template-columns: 1fr; }
        .league-stat-value { font-size: 1.3em; }
        .league-table { font-size: 0.75em; }
        .league-table th, .league-table td { padding: 8px 5px; }
    }
    </style>
    
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèà NFL Picks - Competitor Analysis</h1>
            <p>League Performance & Head-to-Head Comparison</p>
            <p style="font-size: 14px; color: #a0aec0; margin-top: 10px;">üìÖ Last updated: December 24, 2025 at 03:30</p>
            <a href="picks_dashboard.html" class="nav-link">üìä View Individual Picks Dashboard</a>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('leaderboard')">üìä Leaderboard</button>
            <button class="tab-btn" onclick="switchTab('current-week')">üî• Current Week</button>
            <button class="tab-btn" onclick="switchTab('all-weeks')">üìà All Weeks</button>
            <button class="tab-btn" onclick="switchTab('standings')">üèÜ League Standings</button>
        </div>

        <!-- Leaderboard Tab -->
        <div id="leaderboard" class="tab-content active">
            <div class="leaderboard">

                <div class="player-card">
                    <div class="player-rank rank-1">1</div>
                    <div class="player-info">
                        <div class="player-name">Per Sch√∏nwandt</div>
                        <div class="player-stats">
                            <div class="stat">
                                <span>Record:</span>
                                <span class="stat-value">0-0</span>
                            </div>
                            <div class="stat">
                                <span>Win Rate:</span>
                                <span class="stat-value">0.0%</span>
                            </div>
                            <div class="stat">
                                <span>Avg Points:</span>
                                <span class="stat-value">31.9</span>
                            </div>
                        </div>
                        <div class="player-stats" style="margin-top: 5px;">
                            <div class="stat">
                                <span>Favorites:</span>
                                <span class="stat-value">WAS (1), DET (1), DEN (1)</span>
                            </div>
                        </div>
                    </div>
                    <div class="player-points">
                        <div class="points-value">0</div>
                        <div class="points-label">Points</div>
                    </div>
                </div>

                <div class="player-card">
                    <div class="player-rank rank-2">2</div>
                    <div class="player-info">
                        <div class="player-name">Anne sch√∏nwandt</div>
                        <div class="player-stats">
                            <div class="stat">
                                <span>Record:</span>
                                <span class="stat-value">0-0</span>
                            </div>
                            <div class="stat">
                                <span>Win Rate:</span>
                                <span class="stat-value">0.0%</span>
                            </div>
                            <div class="stat">
                                <span>Avg Points:</span>
                                <span class="stat-value">31.9</span>
                            </div>
                        </div>
                        <div class="player-stats" style="margin-top: 5px;">
                            <div class="stat">
                                <span>Favorites:</span>
                                <span class="stat-value">NE (1), DEN (1), DAL (1)</span>
                            </div>
                        </div>
                    </div>
                    <div class="player-points">
                        <div class="points-value">0</div>
                        <div class="points-label">Points</div>
                    </div>
                </div>

                <div class="player-card">
                    <div class="player-rank rank-3">3</div>
                    <div class="player-info">
                        <div class="player-name">Jesper N√∏rm√∏lle</div>
                        <div class="player-stats">
                            <div class="stat">
                                <span>Record:</span>
                                <span class="stat-value">0-0</span>
                            </div>
                            <div class="stat">
                                <span>Win Rate:</span>
                                <span class="stat-value">0.0%</span>
                            </div>
                            <div class="stat">
                                <span>Avg Points:</span>
                                <span class="stat-value">31.9</span>
                            </div>
                        </div>
                        <div class="player-stats" style="margin-top: 5px;">
                            <div class="stat">
                                <span>Favorites:</span>
                                <span class="stat-value">NYJ (1), KC (1), ATL (1)</span>
                            </div>
                        </div>
                    </div>
                    <div class="player-points">
                        <div class="points-value">0</div>
                        <div class="points-label">Points</div>
                    </div>
                </div>

                <div class="player-card">
                    <div class="player-rank ">4</div>
                    <div class="player-info">
                        <div class="player-name">Marc Sch√∏nwandt</div>
                        <div class="player-stats">
                            <div class="stat">
                                <span>Record:</span>
                                <span class="stat-value">0-0</span>
                            </div>
                            <div class="stat">
                                <span>Win Rate:</span>
                                <span class="stat-value">0.0%</span>
                            </div>
                            <div class="stat">
                                <span>Avg Points:</span>
                                <span class="stat-value">31.9</span>
                            </div>
                        </div>
                        <div class="player-stats" style="margin-top: 5px;">
                            <div class="stat">
                                <span>Favorites:</span>
                                <span class="stat-value">DEN (1), NE (1), LA (1)</span>
                            </div>
                        </div>
                    </div>
                    <div class="player-points">
                        <div class="points-value">0</div>
                        <div class="points-label">Points</div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Current Week Tab -->
        <div id="current-week" class="tab-content">
<h2>Week 17 - Head-to-Head Picks</h2><div class="comparison-table"><table><thead><tr><th>Game</th><th>Per</th><th>Anne</th><th>Jesper</th><th>Marc</th></tr></thead><tbody><tr class="totals-row"><td>POINTS THIS WEEK</td><td>0 pts</td><td>0 pts</td><td>0 pts</td><td>0 pts</td></tr><tr><td><strong>DAL @ WAS</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">WAS</span><span class="points-badge">100 pts (#0)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">DAL</span><span class="points-badge">60 pts (#2)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">WAS</span><span class="points-badge">40 pts (#4)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">DAL</span><span class="points-badge">50 pts (#3)</span></div></td></tr><tr><td><strong>DET @ MIN</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">DET</span><span class="points-badge">75 pts (#1)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">DET</span><span class="points-badge">50 pts (#3)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">MIN</span><span class="points-badge">10 pts (#12)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">DET</span><span class="points-badge">26 pts (#7)</span></div></td></tr><tr><td><strong>DEN @ KC</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">DEN</span><span class="points-badge">60 pts (#2)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">DEN</span><span class="points-badge">75 pts (#1)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">KC</span><span class="points-badge">75 pts (#1)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">DEN</span><span class="points-badge">100 pts (#0)</span></div></td></tr><tr><td><strong>HOU @ LAC</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">HOU</span><span class="points-badge">50 pts (#3)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">LAC</span><span class="points-badge">18 pts (#9)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">LAC</span><span class="points-badge">35 pts (#5)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">LAC</span><span class="points-badge">10 pts (#12)</span></div></td></tr><tr><td><strong>BAL @ GB</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">BAL</span><span class="points-badge">40 pts (#4)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">GB</span><span class="points-badge">14 pts (#10)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">GB</span><span class="points-badge">14 pts (#10)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">GB</span><span class="points-badge">14 pts (#10)</span></div></td></tr><tr><td><strong>NE @ NYJ</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">NE</span><span class="points-badge">35 pts (#5)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">NE</span><span class="points-badge">100 pts (#0)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">NYJ</span><span class="points-badge">100 pts (#0)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">NE</span><span class="points-badge">75 pts (#1)</span></div></td></tr><tr><td><strong>TB @ MIA</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">TB</span><span class="points-badge">30 pts (#6)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">TB</span><span class="points-badge">6 pts (#14)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">MIA</span><span class="points-badge">22 pts (#8)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">TB</span><span class="points-badge">22 pts (#8)</span></div></td></tr><tr><td><strong>JAX @ IND</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">JAX</span><span class="points-badge">26 pts (#7)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">JAX</span><span class="points-badge">26 pts (#7)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">IND</span><span class="points-badge">18 pts (#9)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">JAX</span><span class="points-badge">30 pts (#6)</span></div></td></tr><tr><td><strong>NO @ TEN</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">NO</span><span class="points-badge">22 pts (#8)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">NO</span><span class="points-badge">8 pts (#13)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">TEN</span><span class="points-badge">12 pts (#11)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">NO</span><span class="points-badge">18 pts (#9)</span></div></td></tr><tr><td><strong>PIT @ CLE</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">PIT</span><span class="points-badge">18 pts (#9)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">PIT</span><span class="points-badge">22 pts (#8)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">CLE</span><span class="points-badge">30 pts (#6)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">PIT</span><span class="points-badge">8 pts (#13)</span></div></td></tr><tr><td><strong>SEA @ CAR</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">SEA</span><span class="points-badge">14 pts (#10)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">SEA</span><span class="points-badge">30 pts (#6)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">CAR</span><span class="points-badge">26 pts (#7)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">SEA</span><span class="points-badge">35 pts (#5)</span></div></td></tr><tr><td><strong>ARI @ CIN</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">ARI</span><span class="points-badge">12 pts (#11)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">CIN</span><span class="points-badge">35 pts (#5)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">CIN</span><span class="points-badge">50 pts (#3)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">CIN</span><span class="points-badge">40 pts (#4)</span></div></td></tr><tr><td><strong>NYG @ LV</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">NYG</span><span class="points-badge">10 pts (#12)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">LV</span><span class="points-badge">5 pts (#15)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">LV</span><span class="points-badge">5 pts (#15)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">LV</span><span class="points-badge">6 pts (#14)</span></div></td></tr><tr><td><strong>PHI @ BUF</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">PHI</span><span class="points-badge">8 pts (#13)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">BUF</span><span class="points-badge">12 pts (#11)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">BUF</span><span class="points-badge">6 pts (#14)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">BUF</span><span class="points-badge">5 pts (#15)</span></div></td></tr><tr><td><strong>CHI @ SF</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">CHI</span><span class="points-badge">6 pts (#14)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">SF</span><span class="points-badge">10 pts (#12)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">SF</span><span class="points-badge">8 pts (#13)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">SF</span><span class="points-badge">12 pts (#11)</span></div></td></tr><tr><td><strong>LA @ ATL</strong></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">LA</span><span class="points-badge">5 pts (#15)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">LA</span><span class="points-badge">40 pts (#4)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">ATL</span><span class="points-badge">60 pts (#2)</span></div></td><td class="pick-pending"><div class="pick-cell"><span class="team-badge">LA</span><span class="points-badge">60 pts (#2)</span></div></td></tr></tbody></table></div>
        </div>

        <!-- All Weeks Tab -->
        <div id="all-weeks" class="tab-content">
            <div class="week-selector">
                <label>Select Week:</label>
                <select id="weekSelect" onchange="loadWeekData()">
<option value="17">Week 17</option>
                </select>
            </div>
            <div id="weekData"></div>
        </div>

        <!-- League Standings Tab -->
        <div id="standings" class="tab-content">

    <!-- League Standings Section -->
    <div class="league-standings-section">
        <div class="league-header">
            <h2 class="section-title">üèÜ League Standings</h2>
            <div class="global-week-selector">
                <label for="globalStartRound">Start from Round:</label>
                <select id="globalStartRound" onchange="updateAllChartsAndTable()">
                    <option value="1" >1</option><option value="2" >2</option><option value="3" >3</option><option value="4" >4</option><option value="5" >5</option><option value="6" >6</option><option value="7" >7</option><option value="8" selected>8</option><option value="9" >9</option><option value="10" >10</option><option value="11" >11</option><option value="12" >12</option><option value="13" >13</option><option value="14" >14</option><option value="15" >15</option><option value="16" >16</option>
                </select>
                <label for="globalPlayerSelect" style="margin-left: 20px;">Select Player:</label>
                <select id="globalPlayerSelect" onchange="updatePlayerPerspective()">
                    <option value="26337" >Anne sch√∏nwandt</option><option value="29626" >Christopher Blomsterberg-Thaysen</option><option value="18004" >Jesper N√∏rm√∏lle</option><option value="36286" selected>Marc Sch√∏nwandt</option><option value="29597" >Marie Louise Blomsterberg</option><option value="17213" >Per Sch√∏nwandt</option><option value="34641" >Rune Buhl Frederiksen</option><option value="16981" >Sofie Amalie Blomsterberg</option><option value="29606" >Susanne Blomsterberg</option><option value="29763" >Vibeke Sch√∏nwandt</option>
                </select>
            </div>
        </div>

        <div class="league-stats-grid">
            <div class="league-stat-card">
                <div class="league-stat-label">YOUR POSITION</div>
                <div class="league-stat-value highlight" id="statPosition">#2</div>
            </div>
            <div class="league-stat-card">
                <div class="league-stat-label">YOUR TOTAL POINTS</div>
                <div class="league-stat-value" id="statTotalPoints">3,400</div>
            </div>
            <div class="league-stat-card">
                <div class="league-stat-label">GAP TO 1ST</div>
                <div class="league-stat-value" id="statGapFirst">+34</div>
            </div>
            <div class="league-stat-card">
                <div class="league-stat-label">LEAD OVER 3RD</div>
                <div class="league-stat-value" id="statLeadThird">+9</div>
            </div>
        </div>

        <div class="league-charts-grid">
            <div class="league-chart-container">
                <div class="league-chart-title">üìä Total Points Leaderboard</div>
                <canvas id="leagueChartTotal"></canvas>
            </div>

            <div class="league-chart-container">
                <div class="league-chart-title">üìà Round-by-Round Performance</div>
                <canvas id="leagueChartTrend"></canvas>
            </div>
        </div>

        <!-- Scores Per Round Table -->
        <div class="league-table-container">
            <div class="league-chart-title">üìã Scores Per Round</div>
            <div class="table-wrapper" id="tableWrapper">
                <!-- Table will be generated dynamically by JavaScript -->
            </div>
        </div>

        <!-- Accumulated Scores Chart -->
        <div class="league-chart-container-full">
            <div class="league-chart-title">üìà Accumulated Scores</div>
            <canvas id="leagueChartAccumulated"></canvas>
        </div>
    </div>

    <script>
    // League standings data with ALL rounds
    const leagueStandingsData = [{"user_id": 29763, "name": "Vibeke Sch√∏nwandt", "total_points": 3434, "rounds": {"1": 304, "2": 289, "3": 374, "4": 207, "5": 176, "6": 309, "7": 350, "8": 251, "9": 355, "10": 372, "11": 471, "12": 337, "13": 381, "14": 352, "15": 453, "16": 462}, "is_marc": false}, {"user_id": 36286, "name": "Marc Sch√∏nwandt", "total_points": 3400, "rounds": {"1": 326, "2": 5, "3": 0, "4": 0, "5": 0, "6": 94, "7": 396, "8": 402, "9": 325, "10": 341, "11": 450, "12": 430, "13": 337, "14": 302, "15": 421, "16": 392}, "is_marc": true}, {"user_id": 17213, "name": "Per Sch√∏nwandt", "total_points": 3391, "rounds": {"1": 465, "2": 473, "3": 390, "4": 359, "5": 203, "6": 294, "7": 457, "8": 370, "9": 296, "10": 338, "11": 440, "12": 412, "13": 408, "14": 325, "15": 423, "16": 379}, "is_marc": false}, {"user_id": 34641, "name": "Rune Buhl Frederiksen", "total_points": 3385, "rounds": {"1": 448, "2": 353, "3": 357, "4": 249, "5": 249, "6": 265, "7": 438, "8": 408, "9": 265, "10": 346, "11": 456, "12": 397, "13": 268, "14": 391, "15": 407, "16": 447}, "is_marc": false}, {"user_id": 29606, "name": "Susanne Blomsterberg", "total_points": 3371, "rounds": {"1": 257, "2": 400, "3": 246, "4": 267, "5": 256, "6": 278, "7": 373, "8": 305, "9": 305, "10": 298, "11": 413, "12": 412, "13": 418, "14": 347, "15": 423, "16": 450}, "is_marc": false}, {"user_id": 29626, "name": "Christopher Blomsterberg-Thaysen", "total_points": 3262, "rounds": {"1": 250, "2": 476, "3": 306, "4": 393, "5": 219, "6": 256, "7": 358, "8": 452, "9": 369, "10": 319, "11": 425, "12": 363, "13": 418, "14": 343, "15": 295, "16": 278}, "is_marc": false}, {"user_id": 16981, "name": "Sofie Amalie Blomsterberg", "total_points": 3203, "rounds": {"1": 403, "2": 361, "3": 368, "4": 336, "5": 224, "6": 358, "7": 409, "8": 342, "9": 314, "10": 357, "11": 421, "12": 424, "13": 309, "14": 257, "15": 379, "16": 400}, "is_marc": false}, {"user_id": 29597, "name": "Marie Louise Blomsterberg", "total_points": 3193, "rounds": {"1": 435, "2": 382, "3": 312, "4": 309, "5": 274, "6": 320, "7": 408, "8": 364, "9": 323, "10": 308, "11": 404, "12": 420, "13": 329, "14": 211, "15": 422, "16": 412}, "is_marc": false}, {"user_id": 26337, "name": "Anne sch√∏nwandt", "total_points": 3174, "rounds": {"1": 394, "2": 433, "3": 340, "4": 379, "5": 205, "6": 433, "7": 395, "8": 390, "9": 305, "10": 327, "11": 418, "12": 416, "13": 188, "14": 331, "15": 381, "16": 418}, "is_marc": false}, {"user_id": 18004, "name": "Jesper N√∏rm√∏lle", "total_points": 3033, "rounds": {"1": 430, "2": 453, "3": 337, "4": 293, "5": 184, "6": 344, "7": 450, "8": 316, "9": 336, "10": 288, "11": 359, "12": 438, "13": 348, "14": 278, "15": 330, "16": 340}, "is_marc": false}];
    const leagueDefaultStartRound = 8;
    const leagueMinRound = 1;
    const leagueMaxRound = 16;
    let currentPlayerId = 36286;

    // Chart instances
    let totalChart = null;
    let trendChart = null;
    let accumulatedChart = null;

    // Recalculate standings from a given start round
    function recalculateStandings(startRound) {
        const standings = leagueStandingsData.map(player => {
            let total = 0;
            for (let r = startRound; r <= leagueMaxRound; r++) {
                total += player.rounds[r] || 0;
            }
            return {
                ...player,
                calculated_total: total
            };
        });

        // Sort by calculated total
        standings.sort((a, b) => b.calculated_total - a.calculated_total);
        return standings;
    }

    // Update stats cards
    function updateStats(startRound) {
        const standings = recalculateStandings(startRound);
        const playerData = standings.find(p => p.user_id === currentPlayerId);
        const playerPosition = standings.findIndex(p => p.user_id === currentPlayerId) + 1;
        const playerTotal = playerData ? playerData.calculated_total : 0;
        const firstTotal = standings[0] ? standings[0].calculated_total : 0;
        const thirdTotal = standings[2] ? standings[2].calculated_total : 0;

        document.getElementById('statPosition').textContent = '#' + playerPosition;
        document.getElementById('statTotalPoints').textContent = playerTotal.toLocaleString();
        document.getElementById('statGapFirst').textContent = (playerTotal - firstTotal >= 0 ? '+' : '') + (playerTotal - firstTotal);
        document.getElementById('statLeadThird').textContent = (playerTotal - thirdTotal >= 0 ? '+' : '') + (playerTotal - thirdTotal);
    }

    // Generate table
    function generateTable(startRound) {
        const standings = recalculateStandings(startRound);
        const rounds = [];
        for (let r = startRound; r <= leagueMaxRound; r++) {
            rounds.push(r);
        }

        // Find winner and loser for each round
        const roundWinners = {};
        const roundLosers = {};
        rounds.forEach(r => {
            const scores = leagueStandingsData.map(p => p.rounds[r] || 0);
            roundWinners[r] = Math.max(...scores);
            roundLosers[r] = Math.min(...scores);
        });

        let html = '<table class="league-table"><thead><tr>';
        html += '<th class="rank-col">Rank</th>';
        html += '<th class="player-col">Player</th>';
        rounds.forEach(r => {
            html += `<th class="round-col">R${r}</th>`;
        });
        html += '<th class="total-col">Total</th>';
        html += '</tr></thead><tbody>';

        standings.forEach((player, idx) => {
            const rowClass = player.user_id === currentPlayerId ? 'marc-row' : '';
            html += `<tr class="${rowClass}">`;
            html += `<td class="rank-col">#${idx + 1}</td>`;
            html += `<td class="player-col">${player.name}</td>`;
            rounds.forEach(r => {
                const pts = player.rounds[r] || 0;
                let cellClass = 'points-col';
                if (pts === roundWinners[r] && pts > 0) {
                    cellClass += ' round-winner';
                } else if (pts === roundLosers[r] && pts > 0) {
                    cellClass += ' round-loser';
                }
                html += `<td class="${cellClass}">${pts}</td>`;
            });
            html += `<td class="total-col"><strong>${player.calculated_total}</strong></td>`;
            html += '</tr>';
        });

        html += '</tbody></table>';
        document.getElementById('tableWrapper').innerHTML = html;
    }

    // Create/update all charts
    function updateAllCharts(startRound) {
        const standings = recalculateStandings(startRound);
        const rounds = [];
        for (let r = startRound; r <= leagueMaxRound; r++) {
            rounds.push(r);
        }

        // Chart 1: Total Points Bar Chart - ALL 10 members
        const totalCtx = document.getElementById('leagueChartTotal');
        if (totalCtx) {
            if (totalChart) totalChart.destroy();

            totalChart = new Chart(totalCtx, {
                type: 'bar',
                data: {
                    labels: standings.map(p => p.name),
                    datasets: [{
                        label: 'Total Points',
                        data: standings.map(p => p.calculated_total),
                        backgroundColor: standings.map(p =>
                            p.user_id === currentPlayerId ? 'rgba(245, 158, 11, 0.8)' : 'rgba(102, 126, 234, 0.8)'
                        ),
                        borderColor: standings.map(p =>
                            p.user_id === currentPlayerId ? 'rgba(245, 158, 11, 1)' : 'rgba(102, 126, 234, 1)'
                        ),
                        borderWidth: 2
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: (context) => 'Total: ' + context.parsed.x + ' points'
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Total Points' }
                        },
                        y: {
                            title: { display: true, text: 'Player' }
                        }
                    }
                }
            });
        }

        // Chart 2: Round-by-Round Performance - ALL 10 members
        const trendCtx = document.getElementById('leagueChartTrend');
        if (trendCtx) {
            if (trendChart) trendChart.destroy();

            trendChart = new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: rounds.map(r => 'R' + r),
                    datasets: standings.map((player, idx) => ({
                        label: player.name,
                        data: rounds.map(r => player.rounds[r] || 0),
                        borderColor: player.user_id === currentPlayerId ? 'rgba(245, 158, 11, 1)' : `hsl(${idx * 36}, 70%, 50%)`,
                        backgroundColor: player.user_id === currentPlayerId ? 'rgba(245, 158, 11, 0.1)' : `hsla(${idx * 36}, 70%, 50%, 0.1)`,
                        borderWidth: player.user_id === currentPlayerId ? 4 : 2,
                        tension: 0.3,
                        pointRadius: player.user_id === currentPlayerId ? 6 : 4,
                        pointHoverRadius: player.user_id === currentPlayerId ? 8 : 6
                    }))
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'right',
                            labels: { font: { size: 10 }, boxWidth: 12 }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Points' }
                        },
                        x: {
                            title: { display: true, text: 'Round' }
                        }
                    }
                }
            });
        }

        // Chart 3: Accumulated Scores - ALL 10 members
        const accCtx = document.getElementById('leagueChartAccumulated');
        if (accCtx) {
            if (accumulatedChart) accumulatedChart.destroy();

            // Calculate accumulated data
            const accData = standings.map(player => {
                const accumulated = [];
                let total = 0;
                rounds.forEach(r => {
                    total += player.rounds[r] || 0;
                    accumulated.push(total);
                });
                return { ...player, accumulated };
            });

            accumulatedChart = new Chart(accCtx, {
                type: 'line',
                data: {
                    labels: rounds.map(r => 'R' + r),
                    datasets: accData.map((player, idx) => ({
                        label: player.name,
                        data: player.accumulated,
                        borderColor: player.user_id === currentPlayerId ? 'rgba(245, 158, 11, 1)' : `hsl(${idx * 36}, 70%, 50%)`,
                        backgroundColor: player.user_id === currentPlayerId ? 'rgba(245, 158, 11, 0.1)' : `hsla(${idx * 36}, 70%, 50%, 0.1)`,
                        borderWidth: player.user_id === currentPlayerId ? 4 : 2,
                        tension: 0.3,
                        pointRadius: player.user_id === currentPlayerId ? 6 : 4,
                        pointHoverRadius: player.user_id === currentPlayerId ? 8 : 6,
                        fill: false
                    }))
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'right',
                            labels: { font: { size: 10 }, boxWidth: 12 }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Accumulated Points' }
                        },
                        x: {
                            title: { display: true, text: 'Round' }
                        }
                    }
                }
            });
        }
    }

    // Main update function called by dropdown
    function updateAllChartsAndTable() {
        const startRound = parseInt(document.getElementById('globalStartRound').value);
        updateStats(startRound);
        generateTable(startRound);
        updateAllCharts(startRound);
    }

    // Update player perspective when dropdown changes
    function updatePlayerPerspective() {
        currentPlayerId = parseInt(document.getElementById('globalPlayerSelect').value);
        // Refresh everything with the current round
        updateAllChartsAndTable();
    }

    // Initialize on page load
    if (typeof Chart !== 'undefined') {
        updateAllChartsAndTable();
    } else {
        console.error('Chart.js not loaded');
    }
    </script>
    
        </div>
    </div>

    <script>
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Remove active from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Mark button as active
            event.target.classList.add('active');
        }

        // Store all week data
        const weekData = {
17: [{"matchup":"DAL @ WAS","home_team":"WAS","away_team":"DAL","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"WAS","Per_points":100,"Per_rank":0,"Per_won":null,"Anne_pick":"DAL","Anne_points":60,"Anne_rank":2,"Anne_won":null,"Jesper_pick":"WAS","Jesper_points":40,"Jesper_rank":4,"Jesper_won":null,"Marc_pick":"DAL","Marc_points":50,"Marc_rank":3,"Marc_won":null},{"matchup":"DET @ MIN","home_team":"MIN","away_team":"DET","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"DET","Per_points":75,"Per_rank":1,"Per_won":null,"Anne_pick":"DET","Anne_points":50,"Anne_rank":3,"Anne_won":null,"Jesper_pick":"MIN","Jesper_points":10,"Jesper_rank":12,"Jesper_won":null,"Marc_pick":"DET","Marc_points":26,"Marc_rank":7,"Marc_won":null},{"matchup":"DEN @ KC","home_team":"KC","away_team":"DEN","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"DEN","Per_points":60,"Per_rank":2,"Per_won":null,"Anne_pick":"DEN","Anne_points":75,"Anne_rank":1,"Anne_won":null,"Jesper_pick":"KC","Jesper_points":75,"Jesper_rank":1,"Jesper_won":null,"Marc_pick":"DEN","Marc_points":100,"Marc_rank":0,"Marc_won":null},{"matchup":"HOU @ LAC","home_team":"LAC","away_team":"HOU","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"HOU","Per_points":50,"Per_rank":3,"Per_won":null,"Anne_pick":"LAC","Anne_points":18,"Anne_rank":9,"Anne_won":null,"Jesper_pick":"LAC","Jesper_points":35,"Jesper_rank":5,"Jesper_won":null,"Marc_pick":"LAC","Marc_points":10,"Marc_rank":12,"Marc_won":null},{"matchup":"BAL @ GB","home_team":"GB","away_team":"BAL","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"BAL","Per_points":40,"Per_rank":4,"Per_won":null,"Anne_pick":"GB","Anne_points":14,"Anne_rank":10,"Anne_won":null,"Jesper_pick":"GB","Jesper_points":14,"Jesper_rank":10,"Jesper_won":null,"Marc_pick":"GB","Marc_points":14,"Marc_rank":10,"Marc_won":null},{"matchup":"NE @ NYJ","home_team":"NYJ","away_team":"NE","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"NE","Per_points":35,"Per_rank":5,"Per_won":null,"Anne_pick":"NE","Anne_points":100,"Anne_rank":0,"Anne_won":null,"Jesper_pick":"NYJ","Jesper_points":100,"Jesper_rank":0,"Jesper_won":null,"Marc_pick":"NE","Marc_points":75,"Marc_rank":1,"Marc_won":null},{"matchup":"TB @ MIA","home_team":"MIA","away_team":"TB","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"TB","Per_points":30,"Per_rank":6,"Per_won":null,"Anne_pick":"TB","Anne_points":6,"Anne_rank":14,"Anne_won":null,"Jesper_pick":"MIA","Jesper_points":22,"Jesper_rank":8,"Jesper_won":null,"Marc_pick":"TB","Marc_points":22,"Marc_rank":8,"Marc_won":null},{"matchup":"JAX @ IND","home_team":"IND","away_team":"JAX","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"JAX","Per_points":26,"Per_rank":7,"Per_won":null,"Anne_pick":"JAX","Anne_points":26,"Anne_rank":7,"Anne_won":null,"Jesper_pick":"IND","Jesper_points":18,"Jesper_rank":9,"Jesper_won":null,"Marc_pick":"JAX","Marc_points":30,"Marc_rank":6,"Marc_won":null},{"matchup":"NO @ TEN","home_team":"TEN","away_team":"NO","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"NO","Per_points":22,"Per_rank":8,"Per_won":null,"Anne_pick":"NO","Anne_points":8,"Anne_rank":13,"Anne_won":null,"Jesper_pick":"TEN","Jesper_points":12,"Jesper_rank":11,"Jesper_won":null,"Marc_pick":"NO","Marc_points":18,"Marc_rank":9,"Marc_won":null},{"matchup":"PIT @ CLE","home_team":"CLE","away_team":"PIT","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"PIT","Per_points":18,"Per_rank":9,"Per_won":null,"Anne_pick":"PIT","Anne_points":22,"Anne_rank":8,"Anne_won":null,"Jesper_pick":"CLE","Jesper_points":30,"Jesper_rank":6,"Jesper_won":null,"Marc_pick":"PIT","Marc_points":8,"Marc_rank":13,"Marc_won":null},{"matchup":"SEA @ CAR","home_team":"CAR","away_team":"SEA","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"SEA","Per_points":14,"Per_rank":10,"Per_won":null,"Anne_pick":"SEA","Anne_points":30,"Anne_rank":6,"Anne_won":null,"Jesper_pick":"CAR","Jesper_points":26,"Jesper_rank":7,"Jesper_won":null,"Marc_pick":"SEA","Marc_points":35,"Marc_rank":5,"Marc_won":null},{"matchup":"ARI @ CIN","home_team":"CIN","away_team":"ARI","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"ARI","Per_points":12,"Per_rank":11,"Per_won":null,"Anne_pick":"CIN","Anne_points":35,"Anne_rank":5,"Anne_won":null,"Jesper_pick":"CIN","Jesper_points":50,"Jesper_rank":3,"Jesper_won":null,"Marc_pick":"CIN","Marc_points":40,"Marc_rank":4,"Marc_won":null},{"matchup":"NYG @ LV","home_team":"LV","away_team":"NYG","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"NYG","Per_points":10,"Per_rank":12,"Per_won":null,"Anne_pick":"LV","Anne_points":5,"Anne_rank":15,"Anne_won":null,"Jesper_pick":"LV","Jesper_points":5,"Jesper_rank":15,"Jesper_won":null,"Marc_pick":"LV","Marc_points":6,"Marc_rank":14,"Marc_won":null},{"matchup":"PHI @ BUF","home_team":"BUF","away_team":"PHI","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"PHI","Per_points":8,"Per_rank":13,"Per_won":null,"Anne_pick":"BUF","Anne_points":12,"Anne_rank":11,"Anne_won":null,"Jesper_pick":"BUF","Jesper_points":6,"Jesper_rank":14,"Jesper_won":null,"Marc_pick":"BUF","Marc_points":5,"Marc_rank":15,"Marc_won":null},{"matchup":"CHI @ SF","home_team":"SF","away_team":"CHI","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"CHI","Per_points":6,"Per_rank":14,"Per_won":null,"Anne_pick":"SF","Anne_points":10,"Anne_rank":12,"Anne_won":null,"Jesper_pick":"SF","Jesper_points":8,"Jesper_rank":13,"Jesper_won":null,"Marc_pick":"SF","Marc_points":12,"Marc_rank":11,"Marc_won":null},{"matchup":"LA @ ATL","home_team":"ATL","away_team":"LA","home_score":0,"away_score":0,"is_final":false,"winner":null,"Per_pick":"LA","Per_points":5,"Per_rank":15,"Per_won":null,"Anne_pick":"LA","Anne_points":40,"Anne_rank":4,"Anne_won":null,"Jesper_pick":"ATL","Jesper_points":60,"Jesper_rank":2,"Jesper_won":null,"Marc_pick":"LA","Marc_points":60,"Marc_rank":2,"Marc_won":null}],

        };

        function loadWeekData() {
            const week = parseInt(document.getElementById('weekSelect').value);
            const data = weekData[week];

            if (!data || data.length === 0) {
                document.getElementById('weekData').innerHTML = '<p>No data available for this week</p>';
                return;
            }

            // Build table
            let html = '<div class="comparison-table"><table><thead><tr><th>Game</th>';

            // Get player names from first game
            const playerNames = [];
            for (let key in data[0]) {
                if (key.endsWith('_pick')) {
                    playerNames.push(key.replace('_pick', ''));
                }
            }

            // Calculate total points for each player to determine ranking
            const playerPoints = {};
            playerNames.forEach(player => {
                let totalPoints = 0;
                data.forEach(game => {
                    if (game[player + '_won'] === true) {
                        totalPoints += game[player + '_points'] || 0;
                    }
                });
                playerPoints[player] = totalPoints;
            });

            // Sort players by points (highest first = rank 1 on left)
            const players = playerNames.sort((a, b) => playerPoints[b] - playerPoints[a]);

            players.forEach(player => {
                html += `<th>${player}</th>`;
            });

            html += '</tr></thead><tbody>';

            // Add totals row
            html += '<tr class="totals-row"><td>POINTS THIS WEEK</td>';
            players.forEach(player => {
                let totalPoints = 0;
                data.forEach(game => {
                    const won = game[player + '_won'];
                    if (won === true) {
                        totalPoints += game[player + '_points'] || 0;
                    }
                });
                html += `<td>${Math.round(totalPoints)} pts</td>`;
            });
            html += '</tr>';

            // Add game rows
            data.forEach(game => {
                html += `<tr><td><strong>${game.matchup}</strong>`;
                if (game.is_final) {
                    html += `<br><small style="color: #718096;">${Math.round(game.away_score)} - ${Math.round(game.home_score)} (Final)</small>`;
                }
                html += '</td>';

                players.forEach(player => {
                    const pick = game[player + '_pick'];
                    const points = game[player + '_points'];
                    const rank = game[player + '_rank'];
                    const won = game[player + '_won'];

                    // Determine cell class
                    let cellClass = '';
                    if (won === true) {
                        cellClass = ' class="pick-won"';
                    } else if (won === false) {
                        cellClass = ' class="pick-lost"';
                    } else if (won === null && pick) {
                        cellClass = ' class="pick-pending"';
                    }

                    if (pick) {
                        html += `<td${cellClass}><div class="pick-cell">`;
                        html += `<span class="team-badge">${pick}</span>`;
                        html += `<span class="points-badge">${Math.round(points)} pts (#${Math.round(rank)})</span>`;
                        html += '</div></td>';
                    } else {
                        html += '<td>-</td>';
                    }
                });

                html += '</tr>';
            });

            html += '</tbody></table></div>';

            document.getElementById('weekData').innerHTML = html;
        }

        // Load initial week data
        loadWeekData();
    </script>
</body>
</html>
